CREATE DATABASE INVENTORY;

USE INVENTORY;
--------------SUPPLIER TABLE---------------------------
CREATE TABLE SUPPLIER
( SID CHAR(5),
SNAME VARCHAR(10),
SADD VARCHAR(30),
SCITY VARCHAR(30),
SPHONE CHAR(10),
SEMAIL VARCHAR(50));

ALTER TABLE SUPPLIER
ALTER COLUMN SNAME VARCHAR(10) NOT NULL;

ALTER TABLE SUPPLIER 
ALTER COLUMN SADD VARCHAR(30) NOT NULL;

ALTER TABLE SUPPLIER
ADD CONSTRAINT D1 DEFAULT 'DELHI' FOR SCITY;

ALTER TABLE SUPPLIER
ADD CONSTRAINT U1 UNIQUE(SPHONE);

ALTER TABLE SUPPLIER
ALTER COLUMN SID CHAR(5) NOT NULL;

ALTER TABLE SUPPLIER
ADD CONSTRAINT P1 PRIMARY KEY(SID);

INSERT INTO SUPPLIER(SID,SNAME,SADD,SCITY,SPHONE,SEMAIL)
VALUES('S0001','RAJITHA','RAJIV NAGAR','DELHI','9073247652','RAJ23@GMAIL.COM');
INSERT INTO SUPPLIER(SID,SNAME,SADD,SCITY,SPHONE,SEMAIL)
VALUES('S0002','ARUNA','INDIRA NAGAR','HYDERABAD','8732764309','ARUNA14@YAHOO.COM');
INSERT INTO SUPPLIER(SID,SNAME,SADD,SCITY,SPHONE,SEMAIL)
VALUES('S0003','VARUN','SECTOR D','PATNA','8734023865','VARUN34@GMAIL.COM');
INSERT INTO SUPPLIER(SID,SNAME,SADD,SCITY,SPHONE,SEMAIL)
VALUES('S0004','AMIT KUMAR','PRATAP COLONY','DELHI','9834725498','PRATAP09@OUTLOOK.COM');
INSERT INTO SUPPLIER(SID,SNAME,SADD,SCITY,SPHONE,SEMAIL)
VALUES('S0005','SRUTHI','LAXMI COLONY','BIHAR','9328540932','SRU43@GMAIL.COM');
INSERT INTO SUPPLIER(SID,SNAME,SADD,SCITY,SPHONE,SEMAIL)
VALUES('S0006','ARUN SINGH','PUNJAB COLONY','PUNJAB','9843854732','ARUNSINGH2@GMAIL.COM');
INSERT INTO SUPPLIER(SID,SNAME,SADD,SCITY,SPHONE,SEMAIL)
VALUES('S0007','MANI SINGH','PUNJAB SECTOR','PUNJAB','9832754398','MANISINGH32@GMAIL.COM');
INSERT INTO SUPPLIER(SID,SNAME,SADD,SCITY,SPHONE,SEMAIL)
VALUES('S0008','KAVITA','ADARSH NAGAR','HYDERABAD','9348238654','KAVITA56@YAHOO.COM');
INSERT INTO SUPPLIER(SID,SNAME,SADD,SCITY,SPHONE,SEMAIL)
VALUES('S0009','PRIYANKA','VASANTH NAGAR','HYDERABAD','8934728546','PRIYA28@GMAIL.COM');
INSERT INTO SUPPLIER(SID,SNAME,SADD,SCITY,SPHONE,SEMAIL)
VALUES('S0010','KARTHIK','HMT HILLS','BANGALORE','9832754738','KARTHIK4@GMAIL.COM');




SELECT * FROM SUPPLIER;


------------------PRODUCT TABLE----------------------
CREATE TABLE PRODUCT
(PID CHAR(5),
PDESC VARCHAR(40),
PRICE INT,
CATEGORY VARCHAR(30),
SID CHAR(5));

ALTER TABLE PRODUCT
ALTER COLUMN PDESC VARCHAR(40) NOT NULL;

ALTER TABLE PRODUCT
ADD CONSTRAINT C1 CHECK(PRICE > 0);

ALTER TABLE PRODUCT
ADD CONSTRAINT C2 CHECK(CATEGORY IN ('IT','HA','HC'));

ALTER TABLE PRODUCT 
ALTER COLUMN PID CHAR(5) NOT NULL;

ALTER TABLE PRODUCT
ADD CONSTRAINT P2 PRIMARY KEY(PID);

ALTER TABLE PRODUCT 
ADD CONSTRAINT F1 FOREIGN KEY(SID) REFERENCES SUPPLIER(SID);


INSERT INTO PRODUCT(PID,PDESC,PRICE,CATEGORY,SID)
VALUES('P0001','EASILY MOVED','50000','IT','S0001');

INSERT INTO PRODUCT(PID,PDESC,PRICE,CATEGORY,SID)
VALUES('P0002','TO PRESS CLOTHES','50000','HA','S0002');

INSERT INTO PRODUCT(PID,PDESC,PRICE,CATEGORY,SID)
VALUES('P0003','DEVICE USED TO PUSH','6000','IT','S0003');

INSERT INTO PRODUCT(PID,PDESC,PRICE,CATEGORY,SID)
VALUES('P0004','USED TO TYPE','30000','IT','S0004');

INSERT INTO PRODUCT(PID,PDESC,PRICE,CATEGORY,SID)
VALUES('P0005','MEASURE OXY LEVEL','10000','HC','S0005');


INSERT INTO PRODUCT(PID,PDESC,PRICE,CATEGORY,SID)
VALUES('P0006','TRACK HEALTH','5000','HC','S0006');


INSERT INTO PRODUCT(PID,PDESC,PRICE,CATEGORY,SID)
VALUES('P0007','CHECK BP','2000','HC','S0007');


INSERT INTO PRODUCT(PID,PDESC,PRICE,CATEGORY,SID)
VALUES('P0008','MONITOR','8000','IT','S0008');


INSERT INTO PRODUCT(PID,PDESC,PRICE,CATEGORY,SID)
VALUES('P0009','REFRIGERATE','70000','HA','S0009');


INSERT INTO PRODUCT(PID,PDESC,PRICE,CATEGORY,SID)
VALUES('P0010','BLENDER','64000','HA','S0010');


SELECT * FROM PRODUCT;
-----------------------STOCK TABLE-----------------------------------

CREATE TABLE STOCK
(PID CHAR(5),
SQTY INT,
ROL INT,
MOQ INT);

ALTER TABLE STOCK
ADD CONSTRAINT C3 CHECK(SQTY >=0);

ALTER TABLE STOCK 
ADD CONSTRAINT C4 CHECK(ROL > 0);

ALTER TABLE STOCK
ADD CONSTRAINT C5 CHECK(MOQ >=5);

ALTER TABLE STOCK
ADD CONSTRAINT STKF2 FOREIGN KEY(PID) REFERENCES PRODUCT(PID);

INSERT INTO STOCK(PID,SQTY,ROL,MOQ)
VALUES('P0001',10,5,12);
INSERT INTO STOCK(PID,SQTY,ROL,MOQ)
VALUES('P0002',8,2,7);
INSERT INTO STOCK(PID,SQTY,ROL,MOQ)
VALUES('P0003',5,7,11);
INSERT INTO STOCK(PID,SQTY,ROL,MOQ)
VALUES('P0004',6,5,9);
INSERT INTO STOCK(PID,SQTY,ROL,MOQ)
VALUES('P0005',20,18,23);
INSERT INTO STOCK(PID,SQTY,ROL,MOQ)
VALUES('P0006',10,5,19);
INSERT INTO STOCK(PID,SQTY,ROL,MOQ)
VALUES('P0007',17,4,15);
INSERT INTO STOCK(PID,SQTY,ROL,MOQ)
VALUES('P0008',21,7,13);
INSERT INTO STOCK(PID,SQTY,ROL,MOQ)
VALUES('P0009',8,9,10);
INSERT INTO STOCK(PID,SQTY,ROL,MOQ)
VALUES('P0010',17,4,13);

DELETE FROM STOCK
WHERE PID = 'P0009';
DELETE FROM STOCK
WHERE PID = 'P0010';

SELECT * FROM STOCK

-----------------CUSTOMER TABLE-------------------------
CREATE TABLE CUSTOMER
(CID CHAR(5),
CNAME VARCHAR(20),
ADDRESS VARCHAR(50),
CITY VARCHAR(30),
PHONE CHAR(10),
EMAIL VARCHAR(50),
DOB DATE);

ALTER TABLE CUSTOMER
ALTER COLUMN CID CHAR(5) NOT NULL;

ALTER TABLE CUSTOMER
ADD CONSTRAINT CUSPK PRIMARY KEY(CID);

ALTER TABLE CUSTOMER
ALTER COLUMN CNAME VARCHAR(20) NOT NULL;

ALTER TABLE CUSTOMER
ALTER COLUMN ADDRESS VARCHAR(50) NOT NULL;

ALTER TABLE CUSTOMER
ALTER COLUMN CITY VARCHAR(30) NOT NULL;

ALTER TABLE CUSTOMER
ALTER COLUMN PHONE CHAR(10) NOT NULL;

ALTER TABLE CUSTOMER
ALTER COLUMN EMAIL VARCHAR(50) NOT NULL;

ALTER TABLE CUSTOMER
ADD CONSTRAINT CUSCK CHECK(DOB < '1-JAN-2000');

INSERT INTO CUSTOMER(CID,CNAME,ADDRESS,CITY,PHONE,EMAIL,DOB)
VALUES('C0001','SIRISHA','SANATH NAGAR','HYDERABAD','9385285409','SIRI89@GMAIL.COM','19-FEB-1998');

INSERT INTO CUSTOMER(CID,CNAME,ADDRESS,CITY,PHONE,EMAIL,DOB)
VALUES('C0002','AMISHA','KALKI COLONY','WARANGAL','9832764398','AMI32@GMAIL.COM','10-APR-1995');

INSERT INTO CUSTOMER(CID,CNAME,ADDRESS,CITY,PHONE,EMAIL,DOB)
VALUES('C0003','MANISHA','INDIRA COLONY','BANGALORE','9328743098','MANISHA7@YAHOO.COM','23-JUN-1997');

INSERT INTO CUSTOMER(CID,CNAME,ADDRESS,CITY,PHONE,EMAIL,DOB)
VALUES('C0004','MANASA','BALAJI NAGAR','DELHI','8754398765','MANAS89@GMAIL.COM','9-MAY-1994');

INSERT INTO CUSTOMER(CID,CNAME,ADDRESS,CITY,PHONE,EMAIL,DOB)
VALUES('C0005','MUKESH','REDDY COLONY','HYDERABAD','7896543876','MUKESH67@GMAIL.COM','17-AUG-1999');

INSERT INTO CUSTOMER(CID,CNAME,ADDRESS,CITY,PHONE,EMAIL,DOB)
VALUES('C0006','APARNA','KUKATPALLY','HYDERABAD','9853829865','APARNA76@GMAIL.COM','20-MAR-1996');

SELECT * FROM CUSTOMER
-------------------------ORDER TABLE---------------------------

CREATE TABLE ORDERS
(OID CHAR(5),
ODATE DATE,
PID CHAR(5),
CID CHAR(5),
OQTY INT);

ALTER TABLE ORDERS
ALTER COLUMN OID CHAR(5) NOT NULL;

ALTER TABLE ORDERS
ADD CONSTRAINT ORDPK PRIMARY KEY(OID);

ALTER TABLE ORDERS
ADD CONSTRAINT ORDCK CHECK(OQTY >= 1);

ALTER TABLE ORDERS
ADD CONSTRAINT F1ORD FOREIGN KEY(PID) REFERENCES PRODUCT(PID);

ALTER TABLE ORDERS
ADD CONSTRAINT F2ORD FOREIGN KEY(CID) REFERENCES CUSTOMER(CID);

INSERT INTO ORDERS
VALUES('O0001','14-FEB-2024','P0001','C0001','2');
INSERT INTO ORDERS
VALUES('O0002','10-JAN-2024','P0002','C0002','1');
INSERT INTO ORDERS
VALUES('O0003','28-JAN-2024','P0003','C0003','3');
INSERT INTO ORDERS
VALUES('O0004','13-FEB-2024','P0004','C0004','4');
INSERT INTO ORDERS
VALUES('O0005','18-FEB-2024','P0005','C0005','2');

SELECT * FROM ORDERS;

SELECT PRODUCT.PID,PRODUCT.PDESC,PRODUCT.CATEGORY,SUPPLIER.SNAME,SUPPLIER.SCITY
FROM PRODUCT
INNER JOIN SUPPLIER
ON PRODUCT.SID = SUPPLIER.SID;

SELECT ORDERS.OID,ODATE,OQTY,CUSTOMER.CNAME,ADDRESS,PHONE,PRODUCT.PDESC,PRICE,PRICE*OQTY AS 'AMT'
FROM ORDERS
INNER JOIN CUSTOMER
ON ORDERS.CID = CUSTOMER.CID
INNER JOIN PRODUCT
ON PRODUCT.PID = ORDERS.PID;


SELECT P.PID,PDESC,CATEGORY,SNAME,SCITY
FROM PRODUCT P
INNER JOIN SUPPLIER S
ON P.SID = S.SID;

SELECT O.OID,ODATE,CNAME,ADDRESS,PHONE,PDESC,PRICE,PRICE*OQTY AS 'AMT'
FROM ORDERS O
INNER JOIN CUSTOMER C
ON O.CID = C.CID
INNER JOIN PRODUCT P
ON P.PID = O.PID;

